# 📊 測試覆蓋率使用說明

## 🎯 只需要 3 個步驟

### 步驟 1：運行測試

在終端機中執行：

```bash
cd /Users/pch808050/lipinProjects
./run-test-coverage-v2.sh
```

> 💡 **需要 1-2 分鐘**，會自動運行所有測試並生成覆蓋率報告

---

### 步驟 2：查看統計結果

```bash
python3 show-coverage.py
```

會顯示：
```
整體覆蓋率: 44.22%
測試數量: 78 個
哪些類需要補測試
```

---

### 步驟 3：在瀏覽器查看詳細報告

```bash
open spring-boot/target/site/jacoco/index.html
```

會打開網頁，用顏色顯示：
- 🟢 **綠色** = 已測試
- 🔴 **紅色** = 未測試
- 🟡 **黃色** = 部分測試

---

## 📁 報告文件位置

測試完成後，報告會自動生成在：

```
spring-boot/target/
└── site/
    └── jacoco/
        ├── index.html       ← 在瀏覽器打開這個
        ├── jacoco.csv       ← CSV 格式（給 Python 腳本用）
        └── jacoco.xml       ← XML 格式
```

---

## ❓ 常見問題

### Q1: 腳本沒有權限執行？

執行這個給權限：
```bash
chmod +x run-test-coverage-v2.sh
```

### Q2: 想再次查看報告？

不用重新跑測試，直接打開：
```bash
open spring-boot/target/site/jacoco/index.html
```

### Q3: 測試失敗了怎麼辦？

查看詳細錯誤：
```bash
cat spring-boot/target/surefire-reports/*.txt
```

---

## 📊 目前狀況

- **測試覆蓋率:** 44.22%
- **測試數量:** 78 個
- **測試狀態:** ✅ 全部通過

**需要改進的類（0% 覆蓋率）：**
- AuthServiceImpl
- UserServiceImpl
- TotpServiceImpl
- AdminServiceImpl
- AuthController

**目標:** 提升到 70%+

---

## 🚀 快速參考

```bash
# 運行測試
./run-test-coverage-v2.sh

# 查看統計
python3 show-coverage.py

# 打開網頁報告
open spring-boot/target/site/jacoco/index.html
```

---

**就這麼簡單！** 👍

